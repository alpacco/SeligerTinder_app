# üîê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Admin –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

## –°–ø–æ—Å–æ–± 1: Telegram ID (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### –®–∞–≥ 1: –£–∑–Ω–∞–π—Ç–µ —Å–≤–æ–π Telegram ID

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –∏ –Ω–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞ `@userinfobot`
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –µ–º—É –∫–æ–º–∞–Ω–¥—É `/start`
3. –ë–æ—Ç –≤–µ—Ä–Ω–µ—Ç –≤–∞—à Telegram ID (–Ω–∞–ø—Ä–∏–º–µ—Ä: `123456789`)

### –®–∞–≥ 2: –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Railway

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç –≤ Railway
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Variables** (–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è)
3. –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é:
   - **Name**: `ADMIN_TELEGRAM_IDS`
   - **Value**: `123456789` (–≤–∞—à Telegram ID)
   
   –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤:
   - **Value**: `123456789,987654321,555666777` (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)

4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –®–∞–≥ 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö

–ü—Ä–∏ –≤—ã–∑–æ–≤–µ admin endpoints –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ Telegram ID –æ–¥–Ω–∏–º –∏–∑ —Å–ø–æ—Å–æ–±–æ–≤:

**–í–∞—Ä–∏–∞–Ω—Ç A: –í –∑–∞–≥–æ–ª–æ–≤–∫–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
```bash
curl -H "X-Telegram-User-Id: 123456789" \
  https://your-app.com/api/get-all-users-for-admin
```

**–í–∞—Ä–∏–∞–Ω—Ç B: –í query –ø–∞—Ä–∞–º–µ—Ç—Ä–µ**
```bash
curl "https://your-app.com/api/get-all-users-for-admin?telegramUserId=123456789"
```

**–í–∞—Ä–∏–∞–Ω—Ç C: –í JavaScript (Telegram WebApp) - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è**
```javascript
// –°–∞–º—ã–π –±–µ–∑–æ–ø–∞—Å–Ω—ã–π —Å–ø–æ—Å–æ–± - –ø–µ—Ä–µ–¥–∞–µ–º initData –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
const tg = window.Telegram.WebApp;
const initData = tg.initData; // –ü–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

fetch('/api/get-all-users-for-admin', {
  headers: {
    'X-Telegram-Init-Data': initData  // –°–µ—Ä–≤–µ—Ä –ø—Ä–æ–≤–µ—Ä–∏—Ç –ø–æ–¥–ø–∏—Å—å
  }
});
```

**–í–∞—Ä–∏–∞–Ω—Ç D: –í JavaScript (Telegram WebApp) - –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞**
```javascript
// –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± - –ø–µ—Ä–µ–¥–∞–µ–º —Ç–æ–ª—å–∫–æ user ID
const tg = window.Telegram.WebApp;
const userId = tg.initDataUnsafe?.user?.id;

fetch('/api/get-all-users-for-admin', {
  headers: {
    'X-Telegram-User-Id': userId.toString()
  }
});
```

## –°–ø–æ—Å–æ–± 2: Bearer Token (–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)

### –®–∞–≥ 1: –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–π —Ç–æ–∫–µ–Ω

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª—é–±–æ–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–ª—É—á–∞–π–Ω—ã—Ö —Å—Ç—Ä–æ–∫, –Ω–∞–ø—Ä–∏–º–µ—Ä:
```bash
openssl rand -hex 32
```

### –®–∞–≥ 2: –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Railway

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç –≤ Railway
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Variables**
3. –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é:
   - **Name**: `ADMIN_TOKEN`
   - **Value**: `–≤–∞—à-—Å–µ–∫—Ä–µ—Ç–Ω—ã–π-—Ç–æ–∫–µ–Ω-–∑–¥–µ—Å—å`

### –®–∞–≥ 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö

```bash
curl -H "Authorization: Bearer –≤–∞—à-—Å–µ–∫—Ä–µ—Ç–Ω—ã–π-—Ç–æ–∫–µ–Ω-–∑–¥–µ—Å—å" \
  https://your-app.com/api/get-all-users-for-admin
```

## –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ endpoints

–í—Å–µ —Å–ª–µ–¥—É—é—â–∏–µ endpoints —Ç—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:

- `GET /api/get-all-users-for-admin`
- `GET /api/get-user-data-for-badge`
- `GET /api/search-users-for-admin`
- `POST /api/update-user-for-admin`
- `POST /api/delete-user-for-admin`
- `POST /api/send-message-for-admin`
- `POST /api/updateBadge`

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—ã–∑–≤–∞—Ç—å endpoint –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:

```bash
curl https://your-app.com/api/get-all-users-for-admin
```

–î–æ–ª–∂–Ω–∞ –≤–µ—Ä–Ω—É—Ç—å—Å—è –æ—à–∏–±–∫–∞:
```json
{
  "detail": "–¢—Ä–µ–±—É–µ—Ç—Å—è Telegram User ID. –£–∫–∞–∂–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ X-Telegram-User-Id –∏–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä telegramUserId"
}
```

–° –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π:
```bash
curl -H "X-Telegram-User-Id: 123456789" \
  https://your-app.com/api/get-all-users-for-admin
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

## –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: 
   - –ï—Å–ª–∏ `ADMIN_TELEGRAM_IDS` –∏–ª–∏ `ADMIN_TOKEN` –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã, admin endpoints –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏!)
   - –ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–º `BOT_TOKEN` —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–ø–∏—Å—å `initData` –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –ø–æ–¥–¥–µ–ª–∫–∏
   - –í—Å–µ Telegram ID –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è (—Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã, –∑–∞—â–∏—Ç–∞ –æ—Ç –∏–Ω—ä–µ–∫—Ü–∏–π)

2. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –ï—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –æ–±–∞ (`ADMIN_TELEGRAM_IDS` –∏ `ADMIN_TOKEN`), –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç —É Telegram ID

3. **–ù–µ—Å–∫–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤**: –ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ Telegram ID —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é:
   ```
   ADMIN_TELEGRAM_IDS=123456789,987654321,555666777
   ```

4. **Telegram WebApp - –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ø–æ—Å–æ–±**:
   ```javascript
   // –°–∞–º—ã–π –±–µ–∑–æ–ø–∞—Å–Ω—ã–π - –ø–µ—Ä–µ–¥–∞–µ–º initData –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–∏
   const tg = window.Telegram.WebApp;
   fetch('/api/get-all-users-for-admin', {
     headers: {
       'X-Telegram-Init-Data': tg.initData  // –°–µ—Ä–≤–µ—Ä –ø—Ä–æ–≤–µ—Ä–∏—Ç –ø–æ–¥–ø–∏—Å—å —á–µ—Ä–µ–∑ BOT_TOKEN
     }
   });
   ```

5. **–ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–¥–¥–µ–ª–∫–∏**: 
   - –ï—Å–ª–∏ `BOT_TOKEN` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–ø–∏—Å—å `initData`
   - –≠—Ç–æ –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç –ø–æ–¥–¥–µ–ª–∫–∏ Telegram ID
   - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –≤—Å–µ–≥–¥–∞ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å `X-Telegram-Init-Data` –≤–º–µ—Å—Ç–æ `X-Telegram-User-Id`

6. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –í—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è (–±–µ–∑ –ø–æ–ª–Ω–æ–≥–æ ID –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)

