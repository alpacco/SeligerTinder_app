console.log("ðŸ“œ [API.JS] ÐœÐ¾Ð´ÑƒÐ»ÑŒ api.js Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½.");const d=window.API_URL||"/api";async function t(s,o={}){const a=`${d}${s}`,n=o.method||"GET";(n==="POST"||n==="PUT"||n==="PATCH")&&o.body;const u={...o,headers:{...{"Content-Type":"application/json"},...o.headers}};try{const e=await fetch(a,u),c=e.headers.get("content-type");if(c&&c.indexOf("application/json")!==-1){const r=await e.json();if(!e.ok){if(console.warn(`[api.js:request] âš ï¸ ÐžÑ‚Ð²ÐµÑ‚ Ð½Ðµ 'ok'. Ð¡Ñ‚Ð°Ñ‚ÑƒÑ: ${e.status}.`),e.status===404)return null;const i=r.error||`HTTP status ${e.status}`;throw console.error(`[api.js:request] âŒ ÐžÑˆÐ¸Ð±ÐºÐ° API: ${i}`),new Error(i)}return r}else{const r=await e.text();if(!e.ok)throw console.error(`[api.js:request] âŒ ÐžÑˆÐ¸Ð±ÐºÐ° API (Ð½Ðµ JSON Ð¾Ñ‚Ð²ÐµÑ‚): HTTP status ${e.status}`),new Error(`HTTP status ${e.status}`);return r}}catch(e){throw console.error(`[api.js:request] ðŸ’¥ ÐšÐ Ð˜Ð¢Ð˜Ð§Ð•Ð¡ÐšÐÐ¯ ÐžÐ¨Ð˜Ð‘ÐšÐ FETCH Ð´Ð»Ñ ${a}:`,e),e}}const h=s=>t(`/likesReceived?userId=${s}`),P=s=>t("/specialPush",{method:"POST",body:JSON.stringify(s)}),w=s=>t("/sendPush",{method:"POST",body:JSON.stringify(s)}),T=s=>t(`/goals?userId=${s}`),f=s=>t(`/getUser?userId=${s}`);typeof window<"u"&&(window.getUser=f);export{T as a,w as b,h as f,P as s};
